---
import Button from "./Button.astro";
---

<div class="bg-zinc-100 p-8 font-sans">
  <div class="max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md">
    <h1 class="text-2xl font-bold mb-4">Text Case Converter</h1>
    <textarea
      id="textInput"
      class="w-full h-40 p-3 border border-zinc-300 rounded-md mb-4"
      placeholder="Enter your text here"></textarea>
    <div class="flex gap-2 flex-wrap">
      <Button id="sentenceCaseBtn" text="Sentence Case" caseType="sentence" />
      <Button id="lowerCaseBtn" text="lower case" caseType="lower" />
      <Button id="upperCaseBtn" text="UPPER CASE" caseType="upper" />
      <Button
        id="capitalizedCaseBtn"
        text="Capitalized Case"
        caseType="capitalized"
      />
      <Button
        id="alternatingCaseBtn"
        text="aLtErNaTiNg cAsE"
        caseType="alternating"
      />
      <Button id="titleCaseBtn" text="Title Case" caseType="title" />
    </div>
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Function to convert text to different cases
    function convertText(caseType) {
      let text = document.getElementById("textInput").value;

      switch (caseType) {
        case "sentence":
          text = text
            .toLowerCase()
            .replace(/(^\s*\w|[.!?]\s*\w)/g, (c) => c.toUpperCase());
          break;
        case "lower":
          text = text.toLowerCase();
          break;
        case "upper":
          text = text.toUpperCase();
          break;
        case "capitalized":
          text = text.toLowerCase().replace(/\b\w/g, (c) => c.toUpperCase());
          break;
        case "alternating":
          text = text
            .split("")
            .map((c, i) => (i % 2 === 0 ? c.toLowerCase() : c.toUpperCase()))
            .join("");
          break;
        case "title":
          const smallWords = [
            "the",
            "to",
            "and",
            "a",
            "an",
            "in",
            "on",
            "at",
            "for",
            "by",
            "with",
            "of",
            "is",
          ];
          text = text.toLowerCase().replace(/\b\w+/g, function (word, index) {
            if (index === 0 || !smallWords.includes(word)) {
              return word.charAt(0).toUpperCase() + word.slice(1);
            } else {
              return word;
            }
          });
          break;
        default:
          break;
      }

      document.getElementById("textInput").value = text;
    }

    // Dynamically add event listeners to all buttons
    document.querySelectorAll("button").forEach((button) => {
      button.addEventListener("click", function () {
        const caseType = button.id.replace("CaseBtn", "").toLowerCase();
        convertText(caseType);
      });
    });
  });
</script>
